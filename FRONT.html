<html>
<head>
    <title>Latest GitHub Actions</title>
    <script>
        async function fetchData() {
            console.log('Fetching data...');
            try {
                const response = await fetch('https://3620-2401-4900-84c4-e1a7-311d-5383-259a-6464.ngrok-free.app/get-latest-actions');
                const data = await response.json();
                console.log('Data fetched:', data);  // Log the data to verify it was received
                let output = "";
                data.forEach(action => {
                    output += `<p>${action.author} ${action.action_type} to ${action.to_branch} on ${new Date(action.timestamp)}</p>`;
                });
                document.getElementById("data").innerHTML = output;
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }
        
        // Poll every 15 seconds
        setInterval(fetchData, 15000);
        window.onload = fetchData;
    </script>
</head>
<body onload="fetchData()">
    <h1>Latest GitHub Actions</h1>
    <div id="data"></div>  <!-- Data will be displayed here -->
</body>
</html>
